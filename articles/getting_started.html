<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • reproducibleFairTemplate</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Getting Started">
<meta property="og:description" content="reproducibleFairTemplate">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">reproducibleFairTemplate</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/drake_specification.html">drake_specification</a>
    </li>
    <li>
      <a href="../articles/getting_started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/ro_crate.html">RO-Crate Vignette</a>
    </li>
    <li>
      <a href="../articles/scenario_1.html">Scenario 1</a>
    </li>
    <li>
      <a href="../articles/scenario_2.html">Scenario 2</a>
    </li>
    <li>
      <a href="../articles/trace-rm.html">TRACE-RM</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/g4challenge/repro-fair-neuro-ds-template">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="getting_started_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Getting Started</h1>
                        <h4 class="author">Lukas Huber</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/g4challenge/repro-fair-neuro-ds-template/blob/master/vignettes/getting_started.Rmd"><code>vignettes/getting_started.Rmd</code></a></small>
      <div class="hidden name"><code>getting_started.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>There are two main ways to use this template:</p>
<ul>
<li>As a project starter. For this, use Git clone and change the remote to your repository. This starts a clean, fresh project.</li>
<li>As a reference. In that case, you use the project template and parts as reference.</li>
</ul>
<p>In both cases, no one must utilize all provided packages and patterns, one can gradually improve reproducibility. This section will walk you through some of the core aspects to utilize this work.</p>
<p>In order to get reproducible and traceable, one must version control ideally documentation, code, data and execution environment.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_knit.html">opts_knit</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>root.dir <span class="op">=</span> <span class="fu">rprojroot</span><span class="fu">::</span><span class="fu"><a href="https://rprojroot.r-lib.org//reference/find_root_file.html">find_rstudio_root_file</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
<div id="tldr" class="section level2">
<h2 class="hasAnchor">
<a href="#tldr" class="anchor"></a>TL;DR</h2>
<p>How to use this package:</p>
<ol style="list-style-type: decimal">
<li>start by cloning/forking this git repository</li>
<li>use git+github, git lfs, tidyverse and RMarkdown</li>
<li>add/modify Drake Plans to for your Pipeline(s)</li>
<li>Adapt the documentation in Vignettes</li>
<li>(optional) start the RStudio IDE within Docker + use renv</li>
</ol>
</div>
<div id="prerequisites" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites" class="anchor"></a>Prerequisites</h2>
<ul>
<li><p>Your Project should utilize R - although it may be possible to adapt to Python code aswell, it’s native to R.</p></li>
<li><p>Your Project should use Git.</p></li>
<li><p>Your Project MUST have a <code>README</code> file</p></li>
</ul>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h2>
<p>In order to start with your reproducible Project use the following steps to get the template running:</p>
<ul>
<li><p>Create a RStudio-Project in the structure of a package - the template already established a project template.</p></li>
<li><p>Define a license for your Project. By default the template already uses gpl3 - <code><a href="https://usethis.r-lib.org/reference/licenses.html">usethis::use_gpl3_license()</a></code> is the command setting the license file.</p></li>
<li><p>Utilize an environment tool (<code>renv</code>). The project template comes with an <code>renv.lock</code> file and accompanying other files.</p></li>
<li><p>Lint your code to follow good <em>styleguides.</em> Project Template recommends running <code>lintr:::addin_lint_package()</code> - if your package is in package structure, this lints all project files.</p></li>
<li><p>Decide where to host your data. The project template utilizes git for version control, and may be extended with Git-LFS. Use <code>data</code> or <code>data-raw</code> folders.</p></li>
<li><p>Use version control for everything - including <em>code, data, the environment, and even the packaged dependencies</em>.</p></li>
<li><p>Publish your work with a repository. The template is hosted under <a href="https://github.com/g4challenge/repro-fair-neuro-ds-template" class="uri">https://github.com/g4challenge/repro-fair-neuro-ds-template</a> - when using GitHub change the path and name of your template.</p></li>
<li><p>Use continous integration. The template utizes <code>.github/workflows</code> folders with the incorporation of pkgdown build of the <strong>Documentation</strong>, codecov and R-CMD-Check of the <strong>Execution</strong> in order to trace the results.</p></li>
<li><p>Use code tests. The template suggests using <code>testthat</code> and documentation based tests like <code>roxytest</code>.</p></li>
<li><p>Use software engineering practices like docstrings, roxytest. The template utilizes the <code>vignettes</code> folder, <code>roxygen2</code> and <code>roxytest</code> for documentation and good practices.</p></li>
<li><p>use workflows like drake, targets. The <code>vignettes/drake_spec.Rmd</code> file is one example on how to utilize the <code>drake</code> package. A workflow captures inputs and outputs of executions in order to trace results. The template version controls even the executions within the <code>.drake</code> folder, this must be curated for good release practices.</p></li>
<li><p>utilize PROV-Tools (rdtlite) - which creates a PROV-based representation of the workflow executions.</p></li>
<li><p>package your results - this work packages everything on Zenodo.org in the specifications according to <a href="https://www.researchobject.org/ro-crate/">ROCrate</a></p></li>
</ul>
<p>Then you need to consider a few questions on how you want to start building your package:</p>
<ul>
<li>Hypotheses you need to investigate</li>
<li>Long-term traceability</li>
<li>Base data quality</li>
<li>ETL-Process</li>
<li>Analytic processes</li>
</ul>
<div id="scenario-1-walk-through" class="section level3">
<h3 class="hasAnchor">
<a href="#scenario-1-walk-through" class="anchor"></a>Scenario 1: walk-through</h3>
<p>The scenario 1 is one simple scenario involving several steps in a linear manner.</p>
<p>The file is in <code>vignettes/scenario_1.Rmd</code>, it utilizes <code>R/packages.R"</code> for package loading, <code>R/functions.R</code> for general functions, <code>R/functions_scenario_1.R</code> for scenario specific functions and the plan is defined in <code>R/plan.R</code></p>
<p>Open the file <code>scenario_1.Rmd</code> where the statement <code>make(scenario_1)</code> does the execution, and the workflow of drake is visualized as graph.</p>
<p>This graph shows, the sequence from input question, to reading the dataset to producing a report.</p>
</div>
<div id="test-results" class="section level3">
<h3 class="hasAnchor">
<a href="#test-results" class="anchor"></a>Test-Results</h3>
<p><code>testthat</code> is able to test the local package of your analysis using <code>test_local()</code> the following code chunk tests all targets and executions of this package’s workflows.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">testthat</span><span class="fu">::</span><span class="fu"><a href="https://testthat.r-lib.org/reference/test_package.html">test_local</a></span><span class="op">(</span><span class="st">"."</span><span class="op">)</span></code></pre></div>
<pre><code>## Loading required package: tidyverse</code></pre>
<pre><code>## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.0 ──</code></pre>
<pre><code>## ✔ ggplot2 3.3.3     ✔ purrr   0.3.4
## ✔ tibble  3.1.1     ✔ dplyr   1.0.6
## ✔ tidyr   1.1.3     ✔ stringr 1.4.0
## ✔ readr   1.4.0     ✔ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter()  masks stats::filter()
## ✖ purrr::is_null() masks testthat::is_null()
## ✖ dplyr::lag()     masks stats::lag()
## ✖ dplyr::matches() masks tidyr::matches(), testthat::matches()</code></pre>
<pre><code>## Loading required package: rmarkdown</code></pre>
<pre><code>## Loading required package: knitr</code></pre>
<pre><code>## ✔ |  OK F W S | Context
## 
⠏ |   0       | roxytest-tests-functions_scenario_1                             
⠏ |   0       | File R/functions_scenario_1.R: @tests                           
⠙ |   2       | File R/functions_scenario_1.R: @tests                           
✔ |   4       | File R/functions_scenario_1.R: @tests [0.3 s]
## 
⠏ |   0       | roxytest-tests-functions_scenario_2                             
⠏ |   0       | File R/functions_scenario_2.R: @tests                           
✔ |   1       | File R/functions_scenario_2.R: @tests
## 
⠏ |   0       | roxytest-tests-functions                                        
⠏ |   0       | File R/functions.R: @tests                                      
✔ |   2       | File R/functions.R: @tests
## 
⠏ |   0       | roxytest-tests-plan                                             
⠏ |   0       | File R/plan.R: @tests                                           
✔ |   1       | File R/plan.R: @tests
## 
## ══ Results ═════════════════════════════════════════════════════════════════════
## Duration: 0.3 s
## 
## [ FAIL 0 | WARN 0 | SKIP 0 | PASS 8 ]</code></pre>
</div>
<div id="provenance-curation" class="section level3">
<h3 class="hasAnchor">
<a href="#provenance-curation" class="anchor"></a>Provenance Curation</h3>
<p>If you want to curate your results as <code>release</code> - it may be useful and suitable to curate the traces. The following commands help to achieve this:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">drake</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/drake/reference/clean.html">clean</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#clean the cache to force rebuild</span>
<span class="fu">drake</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/drake/reference/clean.html">clean</a></span><span class="op">(</span>destroy<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="co"># clean cache and curate "one" clean run in the drake cache.</span></code></pre></div>
<p>The second command cleans the <code>.drake</code> folder and allows for version control of only the curated final release.</p>
</div>
<div id="complete-provenance" class="section level3">
<h3 class="hasAnchor">
<a href="#complete-provenance" class="anchor"></a>Complete Provenance</h3>
<p>In order to achieve a track record of complete provenance within the template, <code>rdtLite</code> is used in conjunction with a makefile, the <code>make.R</code> is comparable and similar to the <code>scenario_1.Rmd</code> except it can be captured by rdtLite as workflow run.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span><span class="op">(</span><span class="op">)</span> <span class="co">#validate path to project root</span>
<span class="fu">rdtLite</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rdtLite/man/prov.run.html">prov.run</a></span><span class="op">(</span>r.script.path <span class="op">=</span> <span class="st">"make.R"</span>, prov.dir<span class="op">=</span><span class="st">".prov/"</span><span class="op">)</span></code></pre></div>
<p>This results in the fresh creation of a <code>.prov</code> subdirectory - which has provenance execution traces according to the rdtlite specification.</p>
</div>
<div id="development-steps" class="section level3">
<h3 class="hasAnchor">
<a href="#development-steps" class="anchor"></a>Development Steps</h3>
<p>If you may want to continue development on this project and extend it further to your needs. Developing with the project template is comparable to using the template.</p>
<p>Description of steps during development, starting with Docker + RStudio right away.</p>
<ol style="list-style-type: decimal">
<li>clone this template</li>
</ol>
<pre><code>git clone https://github.com/g4challenge/repro-fair-neuro-ds-template</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>within the git repository, start the docker container:</li>
</ol>
<pre><code>docker run --rm -p 8787:8787 -e PASSWORD="1234" -v $(pwd):/home/rstudio my_fair_project </code></pre>
<ol start="3" style="list-style-type: decimal">
<li><p>open your browser at <a href="http://localhost:8787" class="uri">http://localhost:8787</a></p></li>
<li><p>login using user=<code>rstudio</code> password=<code>1234</code></p></li>
<li><p>click open on the .rproj file.</p></li>
<li><p>Start using the project, adapt it to your needs + change the git remote</p></li>
</ol>
<ul>
<li>
<p>Local Docker build</p>
<p>docker build . -t my_fair_project</p>
</li>
<li><p>Local Docker run with default user <code>rstudio</code> and PASSWORD=“1234” - use different password</p></li>
</ul>
<pre><code>docker run --rm -p 8787:8787 -e PASSWORD="1234" -v $(pwd):/home/rstudio g4challenge/repro-fair-neuro-ds-template</code></pre>
</div>
<div id="release-curation" class="section level3">
<h3 class="hasAnchor">
<a href="#release-curation" class="anchor"></a>Release Curation</h3>
<ul>
<li>Version the <code>DESCRIPTION</code> file</li>
<li>Write the <code>News.md</code> file</li>
<li>Build the Package</li>
<li>Create a signed and tagged Git Commit <code>git tag -s v1.5 -m 'my signed 1.5 tag'</code>
</li>
<li>Push the release <code>git push origin main</code>
</li>
<li>Validate Documentation (the pkgdown action must complete)</li>
<li>Tag the DockerHub Image <code>docker tag</code>
</li>
<li>Validate Zenodo Publication</li>
</ul>
</div>
<div id="known-limitations" class="section level3">
<h3 class="hasAnchor">
<a href="#known-limitations" class="anchor"></a>Known Limitations</h3>
<ul>
<li>Currently, not all Versions are Working</li>
<li>Binder: Rsession-proxy has challenges with R 4.0.3 – unresolved</li>
<li>Renv: in continous integration, Python environments are not restored</li>
<li>Provenance Integration – rdtLite not fully working</li>
<li>
<a href="https://github.com/INCF/neuroshapes">NeuroShapes</a> INCF neuroshapes for defined data format - Common Data model.</li>
</ul>
</div>
<div id="faq" class="section level3">
<h3 class="hasAnchor">
<a href="#faq" class="anchor"></a>FAQ</h3>
<p>Q: <em>“Where should I start my documentation?”</em></p>
<p>A: start with the <code>Readme.md</code> with the base context and efforts involved in your project. Then if necessary adapt and change the vignettes to your projects implementation.</p>
<p>Q: <em>How do the various documentations relate to each other? </em></p>
<p>A: The <code>readme</code> serves as starting and entrypoint, while the main documentation by <code>pkgdown</code> is hosted as github page. There, all function documentation and vignettes are rendered and described.</p>
<p>Q: <em>What adaptations do I have to make? </em></p>
<p>A: Ideally, you adapt/fork the template and start by clicking on “use this template” in GitHub. There a new traceable analysis project is created. You need to maintain Links to <strong>GitHub Pages, Zenodo and DockerHub</strong> by yourself.</p>
<p>Q: <em>How can a prioritize these adaptations?</em></p>
<p>A: You start by the most pressing needs first - getting the template externally working. Priority one is fixing the traces and validating these.</p>
<p>Q: <em>What is the minimal set of adaptations that I need to make? </em></p>
<p>A: Minimal is readme, links and the vignettes folder cleaning with one drake_spec, one function.R, one packages.R, one plan.R and finally one docker build. Then your analysis is version controlled and mostly traceable with comparatively low effort.</p>
<p>Q: <em>Can I also apply this to other contexts within medicine, or even outside of a medical context or?</em></p>
<p>A: Yes, the main target is utilizing good clinical practice, STROBE and DAQCORD, but it may suit other needs as well.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lukas Huber.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
